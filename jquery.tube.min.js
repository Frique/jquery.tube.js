/*! jquery.tube.js 0.0.1 | https://github.com/inukshuk/jquery.tube.js */
(function(a,b,c,d,e){"use strict";var f=function(b){this.videos=[],this.options=a.extend({},a.tube.defaults,b)};f.serialize=function(b){var c;switch(typeof b){case"string":c=encodeURI(b);break;case"object":b===null?c="":c=a.map(b,function(a,b){if(a)return[encodeURI(b),encodeURI(a)].join("=")}).join("&");break;default:c=""}return c},f.prototype.load=function(b){var c=this;return a.getJSON(this.request(),function(d){b&&a.isFunction(b)&&(a.each(d.feed.entry,function(a,b){c.videos[a]={},c.videos[a].title=b.title.$t,c.videos[a].description=b.media$group.media$description.$t;var d=b.id.$t;c.videos[a].videoId=d.replace("http://gdata.youtube.com/feeds/api/videos/",""),c.videos[a].thumb="http://img.youtube.com/vi/{videoId}/default.jpg".supplant({videoId:c.videos[a].videoId})}),b.apply(c))}),this},f.prototype.parameters=function(b){var c={};return b=a.extend(b||{},this.options),a.each(a.tube.constants.gdata.map,function(a,d){b[d]&&(c[a]=b[d])}),c.alt="json-in-script",c.callback="?",c},f.prototype.request=function(b){return[a.tube.constants.gdata.api,"?",f.serialize(this.parameters(b))].join("")},exports&&(exports.Tube=f);var g=function(a){this.options=a};g.ready=!1,g.load=function(b){if(!g.ready){g.callback=b;var d=c.createElement("script");return d.src=a.tube.constants.api,a("script:first").before(d),!0}return!1},exports&&(exports.Player=g),String.prototype.supplant||(String.prototype.supplant=function(a){return this.replace(/\{([^{}]*)\}/g,function(b,c){var d=a[c];return typeof d=="string"||typeof d=="number"?d:b})});var h={load:g.load,ready:g.ready};a.fn.tube=function(a){var b,c;return this.length&&(typeof a=="string"?c={query:a}:c=a,b=new f(c),b.load()),this},a.tube=function(b){var c=h[b];return a.isFunction(c)?c.call():c},a.tube.constants={gdata:{api:"http://gdata.youtube.com/feeds/api/videos",map:{q:"query","max-results":"limit",key:"key",format:"format",orderby:"order"}},player:{api:"http://www.youtube.com/player_api"}},a.tube.defaults={player:"#player",order:"published",format:5,limit:!1,key:!1},b.onYouTubePlayerAPIReady=function(){g.ready=!0,console.log("player API loaded")}})(jQuery,window,window.document,"0.0.1")
