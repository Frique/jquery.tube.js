<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>runner - RDoc Documentation</title>

<link type="text/css" media="screen" href="../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../../js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../../index.html">Home</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../../LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../../Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../../../node_modules/jquery/node_modules/htmlparser/CHANGELOG.html">CHANGELOG</a>
  
    <li class="file"><a href="../../../node_modules/jquery/node_modules/htmlparser/LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/changelog.html">changelog</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/contextify/LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/contextify/changelog.html">changelog</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/contextify/wscript.html">wscript</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/htmlparser/CHANGELOG.html">CHANGELOG</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/htmlparser/LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/node_modules/request/LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/test/LICENSE_txt.html">LICENSE</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/test/level2/core/files/orig/robots_txt.html">robots</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/test/level3/core/files/orig/Yes.html">Yes</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/test/level3/core/files/orig/robots_txt.html">robots</a>
  
    <li class="file"><a href="../../../node_modules/jsdom/test/runner.html">runner</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<p>#!/usr/bin/env node</p>

<p>var nodeunit = require(‘nodeunit’),</p>

<pre class="ruby"><span class="ruby-identifier">fs</span> = <span class="ruby-identifier">require</span>(<span class="ruby-string">'fs'</span>),
<span class="ruby-identifier">path</span> = <span class="ruby-identifier">require</span>(<span class="ruby-string">'path'</span>),
<span class="ruby-constant">AssertionError</span> = <span class="ruby-identifier">require</span>(<span class="ruby-string">'assert'</span>).<span class="ruby-constant">AssertionError</span>;
</pre>

<p>require(‘console.log’);</p>

<p>var optimist = require(‘optimist’)</p>

<pre>.usage('Run the jsdom test suite')
.alias('s', 'suites')
.string('s')
.describe('s', 'suites that you want to run. ie: -s level1/core,1/html,html')
.alias('f', 'fail-fast')
.describe('f', 'stop on the first failed test')
.alias('h', 'help')
.describe('h', 'show the help')
.alias('t', 'tests')
.describe('t', 'choose the test cases to run. ie: -t jquery')
.alias('d', 'debug')
.describe('d', 'run in node\'s interactive debugger mode')
.alias('v', 'verbose')
.describe('v', 'show all tests that are being run');</pre>

<p>var argv = optimist.argv; if (argv.help) {</p>

<pre>optimist.showHelp();
process.exit();</pre>

<p>}</p>

<p>var totalTests = 0; var failedTests = 0; var passedTests = 0; var modules =
{}; var currentModule = “”; var moduleIndex = 0; var start = new
Date().getTime(); var fileFilter = []; var testFilter = [];</p>

<p>Error.stackTraceLimit = 100;</p>

<p>if (argv.suites) {</p>

<pre>fileFilter = argv.suites.replace(/\s/g, '').split(',');</pre>

<p>}</p>

<p>if (argv.tests) {</p>

<pre>testFilter = argv.tests.replace(/\s/g, '').split(',');</pre>

<p>}</p>

<p>var assert = require(‘nodeunit/lib/assert’);
require(‘nodeunit/lib/assert’).equal = function equal(actual, expected,
message) {</p>

<pre>if (actual != expected) {
  if (actual &amp;&amp; actual.nodeType) {
    actual = actual.toString();
  }

  if (expected &amp;&amp; expected.nodeType) {
    expected = expected.toString();
  }

  assert.fail(actual, expected, message, '==', assert.equal);
}</pre>

<p>};</p>

<p>assert.domSame = function(actual, expected, message) {</p>

<pre>if(expected != actual) {
  assert.equal(expected.nodeType, actual.nodeType);
  assert.equal(expected.nodeValue, actual.nodeValue);
}</pre>

<p>};</p>

<p>var files = [</p>

<pre>&quot;level1/core.js&quot;,
&quot;level1/html.js&quot;,
&quot;level1/svg.js&quot;,
&quot;level2/core.js&quot;,
&quot;level2/html.js&quot;,
&quot;level2/style.js&quot;,
&quot;level2/extra.js&quot;,
//&quot;level3/core.js&quot;,
//&quot;level3/ls.js&quot;,
&quot;level3/xpath.js&quot;,
&quot;window/index.js&quot;,
&quot;window/script.js&quot;,
&quot;window/frame.js&quot;,
&quot;sizzle/index.js&quot;,
&quot;jsdom/index.js&quot;,
&quot;jsonp/jsonp.js&quot;</pre>

<p>];</p>

<p>if (fileFilter.length &gt; 0) {</p>

<pre>files = files.filter(function(val) {
 var ok = false;
 fileFilter.forEach(function(v) {
   if (val.indexOf(v) &gt; -1) {
    ok = true;
   }
 });
 return ok;
});</pre>

<p>}</p>

<p>var modules = {}; var modulesToRun = {};</p>

<p>files.map(function (p) {</p>

<pre class="ruby"><span class="ruby-identifier">var</span> <span class="ruby-identifier">required</span> = <span class="ruby-identifier">require</span>(<span class="ruby-identifier">path</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">__dirname</span>, <span class="ruby-identifier">p</span>));
<span class="ruby-identifier">var</span> <span class="ruby-keyword">module</span> = <span class="ruby-identifier">required</span>.<span class="ruby-identifier">tests</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">required</span>;
<span class="ruby-identifier">var</span> <span class="ruby-identifier">filteredModule</span> = {};

<span class="ruby-keyword">if</span> (<span class="ruby-identifier">testFilter</span>.<span class="ruby-identifier">length</span>) {
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">moduleKeys</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">keys</span>(<span class="ruby-keyword">module</span>);
  <span class="ruby-identifier">testFilter</span>.<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span>(<span class="ruby-identifier">filter</span>) {
    <span class="ruby-identifier">filter</span> = <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">toLowerCase</span>();
    <span class="ruby-identifier">moduleKeys</span>.<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span>(<span class="ruby-identifier">moduleKey</span>) {
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">moduleKey</span>.<span class="ruby-identifier">toLowerCase</span>().<span class="ruby-identifier">indexOf</span>(<span class="ruby-identifier">filter</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>) {
        <span class="ruby-identifier">filteredModule</span>[<span class="ruby-identifier">moduleKey</span>] = <span class="ruby-keyword">module</span>[<span class="ruby-identifier">moduleKey</span>];
      }
    });
  });
  <span class="ruby-keyword">module</span> = <span class="ruby-identifier">filteredModule</span>;
}

<span class="ruby-keyword">if</span> (<span class="ruby-keyword">module</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">keys</span>(<span class="ruby-keyword">module</span>).<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>) {
  <span class="ruby-identifier">modulesToRun</span>[<span class="ruby-identifier">p</span>] = <span class="ruby-keyword">module</span>;
}
</pre>

<p>});</p>

<p>nodeunit.runModules(modulesToRun, {</p>

<pre class="ruby"><span class="ruby-identifier">moduleStart</span><span class="ruby-operator">:</span> <span class="ruby-identifier">function</span> (<span class="ruby-identifier">name</span>) {
  <span class="ruby-identifier">currentModule</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-string">'.js'</span>, <span class="ruby-string">''</span>);
  <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">&quot;running&quot;</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">currentModule</span>);
  <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">currentModule</span>] = {
    <span class="ruby-identifier">total</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>,
    <span class="ruby-identifier">fail</span>  <span class="ruby-operator">:</span> <span class="ruby-value">0</span>,
    <span class="ruby-identifier">pass</span>  <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
  };
  <span class="ruby-identifier">moduleIndex</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
},
<span class="ruby-identifier">moduleDone</span><span class="ruby-operator">:</span> <span class="ruby-identifier">function</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">assertions</span>) {
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">argv</span>[<span class="ruby-string">'verbose'</span>]) {
    <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">' '</span>);
  }
},
<span class="ruby-identifier">testStart</span><span class="ruby-operator">:</span> <span class="ruby-identifier">function</span> (<span class="ruby-identifier">test</span>) {
  <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">currentModule</span>].<span class="ruby-identifier">total</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">argv</span>[<span class="ruby-string">'verbose'</span>]) {
    <span class="ruby-identifier">process</span>.<span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">'  '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">test</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">' ...'</span>);
  }
},
<span class="ruby-identifier">testDone</span><span class="ruby-operator">:</span> <span class="ruby-identifier">function</span> (<span class="ruby-identifier">test</span>, <span class="ruby-identifier">assertions</span>) {
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">argv</span>[<span class="ruby-string">'verbose'</span>]) {
    <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">' done'</span>);
  }
  <span class="ruby-identifier">totalTests</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
  <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">assertions</span>.<span class="ruby-identifier">failures</span>()) {
    <span class="ruby-identifier">passedTests</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
    <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">currentModule</span>].<span class="ruby-identifier">pass</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
  }
  <span class="ruby-keyword">else</span> {
    <span class="ruby-identifier">failedTests</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;
    <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">currentModule</span>].<span class="ruby-identifier">fail</span><span class="ruby-operator">+</span><span class="ruby-operator">+</span>;

    <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">'✖ '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">currentModule</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">test</span>);
    <span class="ruby-identifier">assertions</span>.<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span> (<span class="ruby-identifier">a</span>) {
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">a</span>.<span class="ruby-identifier">failed</span>()) {
        <span class="ruby-keyword">if</span> (<span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span> <span class="ruby-identifier">instanceof</span> <span class="ruby-constant">AssertionError</span>) {
          <span class="ruby-identifier">a</span> = <span class="ruby-identifier">nodeunit</span>.<span class="ruby-identifier">utils</span>.<span class="ruby-identifier">betterErrors</span>(<span class="ruby-identifier">a</span>);
          <span class="ruby-keyword">if</span> (<span class="ruby-identifier">a</span>.<span class="ruby-identifier">message</span>) {
              <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(
                  <span class="ruby-string">'Assertion Message: '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">assertion_message</span>(<span class="ruby-identifier">a</span>.<span class="ruby-identifier">message</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'\n'</span> <span class="ruby-operator">+</span>
                  <span class="ruby-string">'expected:'</span>, <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">expected</span>, <span class="ruby-string">'got:'</span>, <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">actual</span>
               );
          }
         } <span class="ruby-keyword">else</span> {
          <span class="ruby-keyword">if</span> (<span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">expected</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">actual</span>) {
            <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">'\nERROR'</span>, <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">expected</span>, <span class="ruby-string">'vs'</span>, <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">actual</span>, <span class="ruby-string">'\n'</span>);
          }

          <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">a</span>.<span class="ruby-identifier">error</span>.<span class="ruby-identifier">stack</span>, (<span class="ruby-identifier">new</span> <span class="ruby-constant">Error</span>()).<span class="ruby-identifier">stack</span>);
         }
       } <span class="ruby-keyword">else</span> {
         <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-identifier">a</span>.<span class="ruby-identifier">message</span>);
       }
    });

    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">argv</span>[<span class="ruby-string">'fail-fast'</span>]) {
      <span class="ruby-identifier">process</span>.<span class="ruby-identifier">exit</span>();
    }
  }
},
<span class="ruby-identifier">done</span><span class="ruby-operator">:</span> <span class="ruby-identifier">function</span> (<span class="ruby-identifier">assertions</span>) {
  <span class="ruby-identifier">var</span> <span class="ruby-keyword">end</span> = <span class="ruby-identifier">new</span> <span class="ruby-constant">Date</span>().<span class="ruby-identifier">getTime</span>();
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">duration</span> = <span class="ruby-keyword">end</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">start</span>;
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">maxWidths</span> = {
    <span class="ruby-identifier">name</span>   <span class="ruby-operator">:</span> <span class="ruby-value">0</span>,
    <span class="ruby-identifier">ratio</span>   <span class="ruby-operator">:</span> <span class="ruby-value">0</span>,
    <span class="ruby-identifier">percent</span> <span class="ruby-operator">:</span> <span class="ruby-value">4</span>
  };
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">width</span> = <span class="ruby-value">0</span>;
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">keys</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">keys</span>(<span class="ruby-identifier">modules</span>);

  <span class="ruby-identifier">var</span> <span class="ruby-identifier">calculateMax</span> = <span class="ruby-identifier">function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>) {
    <span class="ruby-keyword">if</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">maxWidths</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">maxWidths</span>[<span class="ruby-identifier">name</span>]) {
        <span class="ruby-identifier">maxWidths</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span>;
    }

    <span class="ruby-identifier">width</span> = <span class="ruby-value">2</span>;
    <span class="ruby-constant">Object</span>.<span class="ruby-identifier">keys</span>(<span class="ruby-identifier">maxWidths</span>).<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span>(<span class="ruby-identifier">v</span>) {
      <span class="ruby-identifier">width</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">maxWidths</span>[<span class="ruby-identifier">v</span>] <span class="ruby-operator">+</span> <span class="ruby-value">2</span>;
    });
  }

  <span class="ruby-identifier">var</span> <span class="ruby-identifier">pad</span> = <span class="ruby-identifier">function</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">rightJustified</span>) {
    <span class="ruby-identifier">var</span> <span class="ruby-identifier">ret</span> = <span class="ruby-string">''</span>;
    <span class="ruby-identifier">var</span> <span class="ruby-identifier">padding</span> = <span class="ruby-string">''</span>;

    <span class="ruby-identifier">var</span> <span class="ruby-identifier">amount</span> = <span class="ruby-identifier">maxWidths</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span>;
    <span class="ruby-keyword">while</span>(<span class="ruby-identifier">amount</span><span class="ruby-operator">-</span><span class="ruby-operator">-</span>) {
        <span class="ruby-identifier">padding</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot; &quot;</span>;
    }

    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">rightJustified</span>) {
      <span class="ruby-keyword">return</span> <span class="ruby-string">' '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">padding</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">+</span> <span class="ruby-string">'     '</span>;
    } <span class="ruby-keyword">else</span> {
      <span class="ruby-keyword">return</span> <span class="ruby-string">' '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">padding</span> <span class="ruby-operator">+</span> <span class="ruby-string">'     '</span>;
    }
  }

  <span class="ruby-regexp">%r/</span> <span class="ruby-constant">First</span> <span class="ruby-identifier">pass</span>, <span class="ruby-identifier">calculate</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">max</span> <span class="ruby-identifier">widths</span>
  <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span>(<span class="ruby-identifier">v</span>) {
     <span class="ruby-identifier">var</span> <span class="ruby-keyword">module</span> = <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">v</span>];
     <span class="ruby-identifier">var</span> <span class="ruby-identifier">ratio</span>  = <span class="ruby-keyword">module</span>.<span class="ruby-identifier">pass</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">module</span>.<span class="ruby-identifier">total</span>;
     <span class="ruby-identifier">var</span> <span class="ruby-identifier">percentage</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">floor</span>((<span class="ruby-keyword">module</span>.<span class="ruby-identifier">pass</span><span class="ruby-operator">/</span><span class="ruby-keyword">module</span>.<span class="ruby-identifier">total</span>)*<span class="ruby-value">100</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'%'</span>;
     <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">v</span>].<span class="ruby-identifier">ratio</span> = <span class="ruby-identifier">ratio</span>;
     <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">v</span>].<span class="ruby-identifier">percentage</span> = <span class="ruby-identifier">percentage</span>;
     <span class="ruby-identifier">calculateMax</span>(<span class="ruby-string">'name'</span>, <span class="ruby-identifier">v</span>);
     <span class="ruby-identifier">calculateMax</span>(<span class="ruby-string">'ratio'</span>, <span class="ruby-identifier">ratio</span>);
     <span class="ruby-identifier">calculateMax</span>(<span class="ruby-string">'percentage'</span>, <span class="ruby-identifier">percentage</span>);
  });

  <span class="ruby-identifier">var</span> <span class="ruby-identifier">caps</span> = <span class="ruby-string">''</span>;
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">gen</span> = <span class="ruby-identifier">width</span>;

  <span class="ruby-keyword">while</span>(<span class="ruby-identifier">gen</span><span class="ruby-operator">-</span><span class="ruby-operator">-</span>) {
    <span class="ruby-identifier">caps</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'-'</span>;
  }

  <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">''</span>);
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">keys</span>(<span class="ruby-identifier">modules</span>).<span class="ruby-identifier">forEach</span>(<span class="ruby-identifier">function</span>(<span class="ruby-identifier">v</span>) {
     <span class="ruby-identifier">var</span> <span class="ruby-keyword">module</span> = <span class="ruby-identifier">modules</span>[<span class="ruby-identifier">v</span>];
     <span class="ruby-identifier">process</span>.<span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">pad</span>(<span class="ruby-string">'name'</span>, <span class="ruby-identifier">v</span>, <span class="ruby-keyword">false</span>));
     <span class="ruby-identifier">process</span>.<span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">pad</span>(<span class="ruby-string">'ratio'</span>, <span class="ruby-keyword">module</span>.<span class="ruby-identifier">ratio</span>, <span class="ruby-keyword">true</span>));
     <span class="ruby-identifier">process</span>.<span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">pad</span>(<span class="ruby-string">'percentage'</span>, <span class="ruby-keyword">module</span>.<span class="ruby-identifier">percentage</span>, <span class="ruby-keyword">true</span>));
     <span class="ruby-identifier">process</span>.<span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">'\n'</span>);
  });
  <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-identifier">caps</span>);
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">ratio</span> = <span class="ruby-identifier">failedTests</span> <span class="ruby-operator">+</span> <span class="ruby-string">'/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">totalTests</span>;
  <span class="ruby-identifier">var</span> <span class="ruby-identifier">percent</span> = <span class="ruby-value">0</span>;
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">totalTests</span> <span class="ruby-operator">===</span> <span class="ruby-value">0</span>) {
    <span class="ruby-identifier">percent</span> = <span class="ruby-string">'100%'</span>;
  } <span class="ruby-keyword">else</span> {
    <span class="ruby-identifier">percent</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">floor</span>((<span class="ruby-identifier">passedTests</span><span class="ruby-operator">/</span><span class="ruby-identifier">totalTests</span>)*<span class="ruby-value">100</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'%'</span>;
  }
  <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">'TOTALS: %s failed; %s success'</span>, <span class="ruby-identifier">ratio</span>, <span class="ruby-identifier">percent</span>);
  <span class="ruby-identifier">console</span>.<span class="ruby-identifier">log</span>(<span class="ruby-string">'TIME: %dms'</span>, <span class="ruby-identifier">duration</span>);
}
</pre>

<p>});</p>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

